<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>3D Dortov√Ω konfigur√°tor</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #fff5f8; display: flex; justify-content: center; padding: 20px; }
        .karta { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); width: 550px; }
        h1 { color: #ad1457; text-align: center; margin-bottom: 20px; }
        
        /* MODERN√ç 3D N√ÅHLED DORTU */
        #box-dortu { 
            margin: 60px auto 30px auto; padding: 40px 20px; 
            background: #ffffff; 
            border: 1px solid #fce7f3; border-radius: 20px;
            display: flex; flex-direction: column-reverse; align-items: center; 
            min-height: 250px; position: relative;
            perspective: 1000px;
        }

        /* 3D KORPUS */
        .v-korpus { 
            height: 32px; 
            border-radius: 8px / 12px; /* Eliptick√© zaoblen√≠ pro efekt v√°lce */
            margin-top: 2px; 
            position: relative; 
            z-index: 5; 
            box-shadow: 0 6px 10px rgba(0,0,0,0.15);
            border: 1px solid rgba(0,0,0,0.1);
            transition: all 0.4s ease;
        }

        /* 3D KR√âM (Boulat√Ω efekt) */
        .v-krem { 
            height: 20px; 
            border-radius: 50px; 
            margin-bottom: -4px; 
            position: relative; 
            display: flex; 
            justify-content: space-around; 
            align-items: center;
            z-index: 4;
            box-shadow: inset 0 -4px 6px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.4);
        }

        /* Kousky ovoce s hloubkou */
        .kousek-ovoce { 
            width: 8px; height: 8px; 
            background: #ff4d4d; border-radius: 50%; 
            box-shadow: 1px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* Jahody naho≈ôe se st√≠nem */
        .jahody-top { 
            position: absolute; 
            bottom: 110%; 
            width: 100%; 
            display: flex; 
            justify-content: center; 
            font-size: 36px; 
            filter: drop-shadow(0 6px 4px rgba(0,0,0,0.3));
            z-index: 10; 
        }

        /* St√≠n pod cel√Ωm dortem */
        #dort-stin {
            position: absolute;
            bottom: 20px;
            width: 200px;
            height: 20px;
            background: rgba(0,0,0,0.1);
            border-radius: 50%;
            filter: blur(8px);
            z-index: 1;
        }

        /* Formul√°≈ô */
        .sekce { text-align: left; margin-bottom: 15px; padding: 15px; background: #fffcfd; border-radius: 12px; border: 1px solid #fce7f3; }
        label { display: block; font-weight: bold; color: #ad1457; font-size: 13px; margin-bottom: 5px; }
        .ch-radek { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        input, select, textarea { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #f9a8d4; box-sizing: border-box; }
        .flex { display: flex; gap: 10px; }
        .btn { width: 100%; padding: 18px; background: #db2777; color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 15px; }
    </style>
</head>
<body>

<div class="karta">
    <h1>üéÇ 3D Konfigur√°tor Dortu</h1>

    <div class="sekce flex">
        <div>
            <label>Pr≈Ømƒõr</label>
            <select id="sirka" onchange="aktualizuj()">
                <option value="180">15 cm</option>
                <option value="250" selected>20 cm</option>
                <option value="320">25 cm</option>
            </select>
        </div>
        <div>
            <label>Patra</label>
            <input type="number" id="patra" value="3" min="2" max="6" oninput="aktualizuj()">
        </div>
    </div>

    <div class="sekce flex">
        <div>
            <label>Korpus</label>
            <select id="korpus" onchange="aktualizuj()">
                <option value="#f8e5ad">Svƒõtl√Ω</option>
                <option value="#4e342e">ƒåokol√°dov√Ω</option>
                <option value="#d2b48c">O≈ôechov√Ω</option>
            </select>
        </div>
        <div>
            <label>Kr√©m</label>
            <select id="krem" onchange="aktualizuj()">
                <option value="#fffdeb">Vanilkov√Ω</option>
                <option value="#795548">Pa≈ô√≠≈æsk√Ω</option>
                <option value="#fce4ec">Ovocn√Ω</option>
            </select>
        </div>
    </div>

    <div class="sekce">
        <div class="ch-radek"><input type="checkbox" id="ov-krem" onchange="aktualizuj()"> <span>Ovoce v kr√©mu</span></div>
        <div class="ch-radek"><input type="checkbox" id="ov-dort" onchange="aktualizuj()"> <span>Ovoce na dortu</span></div>
        <input type="text" id="jmeno" placeholder="Va≈°e jm√©no pro popt√°vku" style="margin-top:10px">
    </div>

    <div id="box-dortu">
        <div id="dort-stin"></div>
    </div>
    
    <button class="btn" onclick="poslatMail()">ODESLAT POPT√ÅVKU</button>
</div>

<script>
    function adjustColor(color, amount) {
        return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
    }

    function aktualizuj() {
        const plocha = document.getElementById('box-dortu');
        const s = document.getElementById('sirka').value;
        const p = document.getElementById('patra').value;
        const cK = document.getElementById('korpus').value;
        const cN = document.getElementById('krem').value;
        const ovoceUvnitr = document.getElementById('ov-krem').checked;
        const ovoceNaho≈ôe = document.getElementById('ov-dort').checked;

        // Vyƒçistit plochu kromƒõ st√≠nu
        const stin = document.getElementById('dort-stin');
        plocha.innerHTML = "";
        plocha.appendChild(stin);
        stin.style.width = s + "px";

        for (let i = 0; i < p; i++) {
            // KORPUS S GRADIENTEM (svƒõtlo zleva)
            let korp = document.createElement('div');
            korp.className = 'v-korpus';
            korp.style.width = s + "px";
            korp.style.background = `linear-gradient(90deg, ${adjustColor(cK, -30)} 0%, ${cK} 50%, ${adjustColor(cK, -20)} 100%)`;
            
            if (i == p - 1 && ovoceNaho≈ôe) {
                let jahody = document.createElement('div');
                jahody.className = 'jahody-top';
                jahody.innerHTML = "üçìüçìüçì";
                korp.appendChild(jahody);
            }
            plocha.appendChild(korp);

            // KR√âM S VYBOULEN√çM
            if (i < p - 1) {
                let napl = document.createElement('div');
                napl.className = 'v-krem';
                napl.style.width = (s * 0.96) + "px";
                napl.style.background = `linear-gradient(90deg, ${adjustColor(cN, -20)} 0%, ${cN} 50%, ${adjustColor(cN, -15)} 100%)`;
                
                if (ovoceUvnitr) {
                    for(let j=0; j<4; j++) {
                        let tecka = document.createElement('div');
                        tecka.className = 'kousek-ovoce';
                        napl.appendChild(tecka);
                    }
                }
                plocha.appendChild(napl);
            }
        }
    }

    function poslatMail() {
        const jmeno = document.getElementById('jmeno').value || "Z√°kazn√≠k";
        window.location.href = `mailto:DOMII.TRNOVSKA@SEZNAM.CZ?subject=Dort&body=Popt√°vka od ${jmeno}`;
    }

    window.onload = aktualizuj;
</script>

</body>
</html>
