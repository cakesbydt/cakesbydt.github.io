<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --primary: #ad1457; }
        body { background: #f0f2f5; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .karta { background: white; padding: 40px; border-radius: 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); width: 450px; }
        
        .scena { height: 350px; perspective: 1200px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .dort-telo { position: relative; width: 180px; transform-style: preserve-3d; transition: transform 0.05s linear; }

        /* Vrstvy dortu */
        .vrstva { position: absolute; width: 100%; height: 40px; transform-style: preserve-3d; bottom: var(--bottom); }
        .segment { 
            position: absolute; width: var(--segW); height: 40px; left: 50%; margin-left: calc(var(--segW)/-2); 
            background: linear-gradient(to right, rgba(0,0,0,0.2), transparent, rgba(0,0,0,0.2)), var(--color); 
            border: 0.1px solid rgba(0,0,0,0.05); 
        }
        
        /* Víčko */
        .vicko { position: absolute; width: var(--w); height: var(--w); background: var(--topColor); border-radius: 50%; left: 50%; top: 50%; transform: translate(-50%, -50%) rotateX(90deg) translateZ(20px); transform-style: preserve-3d; }

        /* 3D JAHODA - OPRAVENÁ POZICE */
        .strawberry-3d { 
            position: absolute; 
            width: 30px; height: 40px; 
            transform-style: preserve-3d; 
            pointer-events: none;
            /* rotateX(-90) postaví jahodu, translateZ(20) ji vytáhne nad víčko */
            transform-origin: center bottom;
        }
        
        .strawberry-face {
            position: absolute;
            width: 100%; height: 100%;
            background-size: contain;
            background-repeat: no-repeat;
            /* Důležité: rotace kolem spodní hrany */
            transform-origin: bottom center;
        }

        .face-2 { transform: rotateY(90deg); }

        /* Stín pod jahodou na víčku */
        .stin-pod-jahodou {
            position: absolute;
            width: 15px; height: 8px;
            background: rgba(0,0,0,0.15);
            border-radius: 50%;
            filter: blur(2px);
            transform: translateZ(-1px); /* Těsně pod jahodu */
        }

        .tahlo { width: 100%; margin: 30px 0 10px 0; accent-color: var(--primary); cursor: pointer; }
    </style>
</head>
<body>

<div class="karta">
    <h2 style="color:var(--primary)">Cakes by DT</h2>
    <div class="scena"><div class="dort-telo" id="vizual"></div></div>
    <input type="range" min="0" max="360" value="45" class="tahlo" oninput="otoc(this.value)">
    <p style="font-size: 11px; color: #aaa; letter-spacing: 1px; text-transform: uppercase;">Otáčejte pro prohlédnutí</p>
</div>

<script>
    const strawberrySVG = `url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 120"><path d="M50,115 C20,115 5,85 5,55 C5,25 25,10 50,10 C75,10 95,25 95,55 C95,85 80,115 50,115 Z" fill="%23ff4d4d"/><circle cx="30" cy="40" r="3" fill="white" opacity="0.2"/><path d="M50,15 L35,-5 L50,5 L65,-5 Z" fill="%232e7d32"/></svg>')`;

    function otoc(v) {
        document.getElementById('vizual').style.transform = `rotateX(-25deg) rotateY(${v}deg)`;
    }

    function kresli() {
        const plocha = document.getElementById('vizual');
        const sirka = 180;
        const barvy = ['#4e342e', '#f8bbd0']; 
        
        plocha.innerHTML = "";
        for (let i = 0; i < 4; i++) {
            const v = document.createElement('div');
            v.className = 'vrstva';
            v.style.setProperty('--bottom', (i * 40) + 'px');
            v.style.setProperty('--color', barvy[i % 2]);
            v.style.setProperty('--segW', (Math.PI * sirka / 24 + 2) + 'px');

            for (let j = 0; j < 24; j++) {
                const s = document.createElement('div');
                s.className = 'segment';
                s.style.transform = `rotateY(${j * 15}deg) translateZ(${sirka/2}px)`;
                v.appendChild(s);
            }

            if (i === 3) { // Vrchní krém
                const vicko = document.createElement('div');
                vicko.className = 'vicko';
                vicko.style.setProperty('--w', sirka + 'px');
                vicko.style.setProperty('--topColor', '#f8bbd0');
                
                const r = sirka / 3.5;
                const pozice = [[0,0], [r,0], [-r,0], [0,r], [0,-r]];
                
                pozice.forEach(p => {
                    const stredX = sirka/2 + p[0];
                    const stredY = sirka/2 + p[1];
                    
                    const j3d = document.createElement('div');
                    j3d.className = 'strawberry-3d';
                    j3d.style.left = (stredX - 15) + 'px';
                    j3d.style.top = (stredY - 20) + 'px';
                    
                    // translateZ(1) posune jahodu nad povrch víčka, aby nebyla utopená
                    j3d.style.transform = `rotateX(-90deg) translateZ(2px)`;

                    // Přidáme stín pod jahodu
                    const stin = document.createElement('div');
                    stin.className = 'stin-pod-jahodou';
                    stin.style.left = '7.5px';
                    stin.style.bottom = '-2px';
                    j3d.appendChild(stin);

                    const f1 = document.createElement('div');
                    f1.className = 'strawberry-face';
                    f1.style.backgroundImage = strawberrySVG;
                    
                    const f2 = document.createElement('div');
                    f2.className = 'strawberry-face face-2';
                    f2.style.backgroundImage = strawberrySVG;
                    
                    j3d.appendChild(f1);
                    j3d.appendChild(f2);
                    vicko.appendChild(j3d);
                });
                v.appendChild(vicko);
            }
            plocha.appendChild(v);
        }
        otoc(45);
    }
    kresli();
</script>
</body>
</html>
