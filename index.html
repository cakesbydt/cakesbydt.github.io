<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dortov√Ω konfigur√°tor | Cakes by DT</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #db2777;
            --primary-dark: #ad1457;
            --accent: #fce7f3;
            --bg: #fff5f8;
            --text: #4a4a4a;
            --shadow: 0 15px 35px rgba(219, 39, 119, 0.1);
        }

        body { 
            font-family: 'Montserrat', sans-serif; 
            background: linear-gradient(135deg, #fff5f8 0%, #fde2e4 100%);
            color: var(--text);
            display: flex; 
            justify-content: center; 
            padding: 40px 20px;
            margin: 0;
        }

        .karta { 
            background: rgba(255, 255, 255, 0.95); 
            padding: 40px; 
            border-radius: 30px; 
            box-shadow: var(--shadow); 
            width: 100%;
            max-width: 650px; 
            backdrop-filter: blur(10px);
        }
        
        /* LOGO & HLAVIƒåKA */
        .logo-container { text-align: center; margin-bottom: 20px; }
        .logo-img { 
            max-width: 120px; 
            border-radius: 50%; 
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.5s ease;
        }
        .logo-img:hover { transform: rotate(5deg) scale(1.05); }

        h1 { 
            font-family: 'Playfair Display', serif;
            color: var(--primary-dark); 
            text-align: center; 
            margin: 0; 
            font-size: 2.2rem;
            letter-spacing: -0.5px;
        }

        .ig-odkaz { text-align: center; margin-bottom: 30px; }
        .ig-odkaz a { 
            color: var(--primary); 
            text-decoration: none; 
            font-weight: 600; 
            font-size: 14px; 
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: 0.3s;
        }
        .ig-odkaz a:hover { opacity: 0.7; }

        /* GALERIE */
        .galerie { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; 
            margin-bottom: 35px; 
        }
        .galerie img { 
            width: 100%; 
            height: 140px; 
            object-fit: cover; 
            border-radius: 15px; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .galerie img:hover { transform: translateY(-5px) scale(1.02); }

        /* VIZUALIZACE DORTU */
        #box-dortu { 
            margin: 30px auto; 
            padding: 50px 20px 30px 20px; 
            background: #fff; 
            border-radius: 20px;
            display: flex; 
            flex-direction: column-reverse; 
            align-items: center; 
            min-height: 220px;
            border: 1px solid var(--accent);
            box-shadow: inset 0 0 20px rgba(0,0,0,0.02);
        }
        .v-korpus { 
            height: 28px; 
            border-radius: 6px; 
            margin-top: 2px; 
            position: relative; 
            z-index: 2; 
            transition: 0.4s;
            box-shadow: inset 0 -3px 0 rgba(0,0,0,0.1);
        }
        .v-krem { 
            height: 18px; 
            border-radius: 12px; 
            margin-bottom: -2px; 
            position: relative; 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        .kousek-ovoce { 
            width: 8px; 
            height: 8px; 
            border-radius: 50%; 
            filter: blur(0.5px);
        }
        .jahody-top { 
            position: absolute; 
            bottom: 110%; 
            width: 100%; 
            display: flex; 
            justify-content: center; 
            font-size: 32px; 
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
        }

        /* FORMUL√Å≈ò */
        .sekce { 
            margin-bottom: 20px; 
            padding: 20px; 
            background: white; 
            border-radius: 18px; 
            border: 1px solid #f1f1f1;
            transition: 0.3s;
        }
        .sekce:hover { border-color: var(--accent); }

        h3 { 
            color: var(--primary-dark); 
            font-size: 15px; 
            margin: 0 0 15px 0; 
            text-transform: uppercase;
            letter-spacing: 1.5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        h3::after { content: ""; flex: 1; height: 1px; background: var(--accent); }

        label { display: block; font-weight: 600; color: #777; font-size: 12px; margin-bottom: 8px; }
        
        input[type="text"], input[type="tel"], input[type="email"], select, textarea { 
            width: 100%; 
            padding: 12px 15px; 
            border-radius: 10px; 
            border: 1.5px solid #eee; 
            box-sizing: border-box; 
            font-family: inherit;
            font-size: 14px;
            transition: 0.3s;
            background: #fafafa;
        }
        input:focus, select:focus, textarea:focus { 
            outline: none; 
            border-color: var(--primary); 
            background: white;
            box-shadow: 0 0 0 4px rgba(219, 39, 119, 0.05);
        }

        .ch-radek { 
            display: grid; 
            grid-template-columns: 24px 120px 1fr;
            align-items: center; 
            gap: 10px; 
            margin-bottom: 12px; 
            font-size: 14px; 
        }
        input[type="checkbox"] { 
            width: 18px; 
            height: 18px; 
            accent-color: var(--primary);
            cursor: pointer;
        }

        .flex { display: flex; gap: 15px; }
        .flex > div { flex: 1; }
        
        .btn { 
            width: 100%; 
            padding: 18px; 
            background: var(--primary); 
            color: white; 
            border: none; 
            border-radius: 15px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 16px; 
            letter-spacing: 1px;
            margin-top: 20px; 
            transition: all 0.3s; 
            box-shadow: 0 10px 20px rgba(219, 39, 119, 0.2);
        }
        .btn:hover { 
            background: var(--primary-dark); 
            transform: translateY(-2px);
            box-shadow: 0 15px 25px rgba(219, 39, 119, 0.3);
        }

        .footer-ig { text-align: center; margin-top: 30px; font-size: 13px; color: #999; }
        .footer-ig a { color: var(--primary); text-decoration: none; font-weight: 600; }

        @media (max-width: 500px) {
            .flex { flex-direction: column; gap: 10px; }
            .ch-radek { grid-template-columns: 24px 1fr; }
            .ch-radek input[type="text"] { grid-column: 1 / span 2; }
        }
    </style>
</head>
<body>

<div class="karta">
    <div class="logo-container">
        <img src="https://img.freepik.com/premium-vector/elegant-cake-logo-design-bakery-logo-vector_564346-30.jpg" alt="Logo" class="logo-img">
    </div>

    <h1>Cakes by DT</h1>
    <div class="ig-odkaz">
        <a href="https://www.instagram.com/_cakesbydt_/" target="_blank">‚ú® Sledovat na Instagramu</a>
    </div>

    <div class="galerie">
        <img src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?auto=format&fit=crop&w=300&q=80" alt="Dort 1">
        <img src="https://images.unsplash.com/photo-1565958011703-44f9829ba187?auto=format&fit=crop&w=300&q=80" alt="Dort 2">
        <img src="https://images.unsplash.com/photo-1535141192574-5d4897c82536?auto=format&fit=crop&w=300&q=80" alt="Dort 3">
    </div>

    <div class="sekce">
        <h3>üë§ Kontaktn√≠ √∫daje</h3>
        <input type="text" id="jmeno" placeholder="Va≈°e jm√©no a p≈ô√≠jmen√≠">
        <div class="flex" style="margin-top:12px">
            <input type="tel" id="telefon" placeholder="Telefonn√≠ ƒç√≠slo">
            <input type="email" id="email-zak" placeholder="E-mailov√° adresa">
        </div>
    </div>

    <div class="sekce flex">
        <div>
            <label>Pr≈Ømƒõr dortu</label>
            <select id="sirka" onchange="aktualizuj()">
                <option value="180">Mal√Ω (15 cm)</option>
                <option value="240" selected>St≈ôedn√≠ (20 cm)</option>
                <option value="300">Velk√Ω (25 cm)</option>
                <option value="360">Extra (30 cm)</option>
            </select>
        </div>
        <div>
            <label>Poƒçet pater</label>
            <select id="patra" onchange="aktualizuj()">
                <option value="2">2 patra (standard)</option>
                <option value="3" selected>3 patra (vysok√Ω)</option>
                <option value="4">4 patra</option>
                <option value="5">5 pater</option>
            </select>
        </div>
    </div>

    <div class="sekce flex">
        <div>
            <label>P≈ô√≠chu≈• korpusu</label>
            <select id="korpus" onchange="aktualizuj()">
                <option value="#f3e5ab">Svƒõtl√Ω pi≈°kot</option>
                <option value="#3e2723">ƒåokol√°dov√Ω (kakao)</option>
                <option value="#d7ccc8">O≈ôechov√Ω korpus</option>
            </select>
        </div>
        <div>
            <label>Druh n√°plnƒõ</label>
            <select id="krem" onchange="aktualizuj()">
                <option value="#fffde7">Lehk√Ω vanilkov√Ω</option>
                <option value="#5d4037">Pa≈ô√≠≈æsk√° ≈°lehaƒçka</option>
                <option value="#f8bbd0">Ovocn√Ω kr√©m</option>
            </select>
        </div>
    </div>

    <div class="sekce">
        <h3>‚ú® Design a dopl≈àky</h3>
        <div class="ch-radek">
            <input type="checkbox" id="ov-krem" onchange="aktualizuj()"> <span>Ovoce v kr√©mu</span>
            <input type="text" id="ov-krem-txt" placeholder="Nap≈ô. maliny..." oninput="aktualizuj()">
        </div>
        <div class="ch-radek">
            <input type="checkbox" id="ov-dort" onchange="aktualizuj()"> <span>Ovoce naho≈ôe</span>
            <input type="text" id="ov-dort-txt" placeholder="Nap≈ô. jahody..." oninput="aktualizuj()">
        </div>
        <div class="ch-radek">
            <input type="checkbox" id="papir-ch"> <span>Jedl√Ω pap√≠r</span>
            <input type="text" id="papir-txt" placeholder="Motiv (nap≈ô. Tlapkov√° patrola)">
        </div>
        <div class="ch-radek">
            <input type="checkbox" id="marc-ch"> <span>Figurka</span>
            <input type="text" id="marc-txt" placeholder="Popis figurky">
        </div>
        <div class="ch-radek">
            <input type="checkbox" id="zapich-ch"> <span>Z√°pich</span>
            <input type="text" id="zapich-txt" placeholder="Vƒõk nebo jm√©no">
        </div>
        <textarea id="poznamka" style="margin-top:15px; min-height: 80px;" placeholder="M√°te speci√°ln√≠ p≈ô√°n√≠? Napi≈°te mi ho sem..."></textarea>
    </div>

    <div id="box-dortu"></div>
    
    <button class="btn" onclick="poslatMail()">ODESLAT NEZ√ÅVAZNOU POPT√ÅVKU</button>

    <div class="footer-ig">
        S l√°skou peƒçe <a href="https://www.instagram.com/_cakesbydt_/" target="_blank">@_cakesbydt_</a>
    </div>
</div>

<script>
    function detekujOvoce(text) {
        text = text.toLowerCase();
        if (text.includes("bor≈Øv") || text.includes("boruv")) return { barva: "#3f51b5", emoji: "ü´ê" };
        if (text.includes("malin")) return { barva: "#e91e63", emoji: "üíñ" };
        if (text.includes("hrozn")) return { barva: "#8bc34a", emoji: "üçá" };
        if (text.includes("kiwi")) return { barva: "#4caf50", emoji: "ü•ù" };
        if (text.includes("ƒçoko") || text.includes("coko")) return { barva: "#3e2723", emoji: "üç´" };
        if (text.includes("mango")) return { barva: "#ffb300", emoji: "ü•≠" };
        return { barva: "#ff4d4d", emoji: "üçì" };
    }

    function aktualizuj() {
        const plocha = document.getElementById('box-dortu');
        const s = document.getElementById('sirka').value;
        const p = document.getElementById('patra').value;
        const cK = document.getElementById('korpus').value;
        const cN = document.getElementById('krem').value;
        
        const ovoceUvnitr = document.getElementById('ov-krem').checked;
        const textUvnitr = document.getElementById('ov-krem-txt').value;
        const barvaUvnitr = detekujOvoce(textUvnitr).barva;

        const ovoceNahore = document.getElementById('ov-dort').checked;
        const textNahore = document.getElementById('ov-dort-txt').value;
        const emojiNahore = detekujOvoce(textNahore).emoji;

        plocha.innerHTML = "";

        for (let i = 0; i < p; i++) {
            let korp = document.createElement('div');
            korp.className = 'v-korpus';
            korp.style.width = s + "px";
            korp.style.backgroundColor = cK;
            
            if (i == p - 1 && ovoceNahore) {
                let dekorce = document.createElement('div');
                dekorce.className = 'jahody-top';
                dekorce.innerHTML = emojiNahore + emojiNahore + emojiNahore;
                korp.appendChild(dekorce);
            }
            plocha.appendChild(korp);

            if (i < p - 1) {
                let napl = document.createElement('div');
                napl.className = 'v-krem';
                napl.style.width = (s - 12) + "px";
                napl.style.backgroundColor = cN;
                
                if (ovoceUvnitr) {
                    for(let j=0; j<5; j++) {
                        let tecka = document.createElement('div');
                        tecka.className = 'kousek-ovoce';
                        tecka.style.backgroundColor = barvaUvnitr;
                        napl.appendChild(tecka);
                    }
                }
                plocha.appendChild(napl);
            }
        }
    }

    function poslatMail() {
        const jmeno = document.getElementById('jmeno').value;
        if(!jmeno) { alert("Pros√≠m vypl≈àte jm√©no."); return; }
        
        const getVal = (idCh, idTxt) => {
            const ch = document.getElementById(idCh).checked;
            const txt = idTxt ? document.getElementById(idTxt).value : "";
            return ch ? `ANO (${txt})` : "NE";
        };

        const prumer = document.getElementById('sirka').options[document.getElementById('sirka').selectedIndex].text;
        const patraText = document.getElementById('patra').options[document.getElementById('patra').selectedIndex].text;
        
        const telo = `Nov√° popt√°vka od: ${jmeno}%0A` +
                     `Kontakt: ${document.getElementById('telefon').value} | ${document.getElementById('email-zak').value}%0A%0A` +
                     `--- SPECIFIKACE ---%0A` +
                     `Dort: ${prumer}, ${patraText}%0A` +
                     `Korpus: ${document.getElementById('korpus').options[document.getElementById('korpus').selectedIndex].text}%0A` +
                     `Kr√©m: ${document.getElementById('krem').options[document.getElementById('krem').selectedIndex].text}%0A%0A` +
                     `--- DOPL≈áKY ---%0A` +
                     `Ovoce v kr√©mu: ${getVal('ov-krem', 'ov-krem-txt')}%0A` +
                     `Ovoce na dortu: ${getVal('ov-dort', 'ov-dort-txt')}%0A` +
                     `Jedl√Ω pap√≠r: ${getVal('papir-ch', 'papir-txt')}%0A` +
                     `Figurka: ${getVal('marc-ch', 'marc-txt')}%0A` +
                     `Z√°pich: ${getVal('zapich-ch', 'zapich-txt')}%0A%0A` +
                     `Pozn√°mka: ${document.getElementById('poznamka').value}`;

        window.location.href = `mailto:DOMII.TRNOVSKA@SEZNAM.CZ?subject=Popt√°vka_Dortu_${jmeno.replace(/ /g, '_')}&body=${telo}`;
    }

    window.onload = aktualizuj;
</script>

</body>
</html>
