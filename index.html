<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Konfigur치tor | Cakes by DT</title>
    <style>
        :root { --primary: #ad1457; --primary-dark: #880e4f; --bg: #fff5f8; --border: #fce7f3; --accent: #f9a8d4; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg); display: flex; justify-content: center; padding: 0; margin: 0; min-height: 100vh; }
        .hlavni-wrapper { display: flex; width: 100%; max-width: 1200px; background: white; box-shadow: 0 20px 60px rgba(173,20,87,0.1); margin: 40px 20px; border-radius: 30px; overflow: hidden; }
        .levy-panel { flex: 0 0 320px; background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); display: flex; flex-direction: column; align-items: center; padding: 60px 20px; position: sticky; top: 0; color: white; box-sizing: border-box; }
        .logo-vlevo { width: 260px; height: auto; border-radius: 20px; border: 4px solid rgba(255,255,255,0.2); }
        .obsah { flex: 1; padding: 50px 60px; background: white; }
        h1 { color: var(--primary); margin: 0; font-size: 38px; font-weight: 800; }
        h3 { color: var(--primary); font-size: 14px; margin: 0 0 20px; text-transform: uppercase; border-bottom: 1px solid var(--border); padding-bottom: 8px; }
        .sekce { background: #ffffff; padding: 25px; border-radius: 20px; border: 1px solid var(--border); margin-bottom: 25px; }
        .flex { display: flex; gap: 15px; margin-bottom: 15px; }
        .flex > div { flex: 1; }
        label { display: block; font-size: 12px; font-weight: 700; color: #666; margin-bottom: 6px; }
        input, select, textarea { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #e0e0e0; box-sizing: border-box; font-family: inherit; }

        /* 3D SC칄NA */
        .scena-wrapper { background: linear-gradient(to bottom, #fff, var(--bg)); border: 2px dashed var(--accent); border-radius: 25px; margin: 30px 0; padding: 40px 20px; display: flex; flex-direction: column; align-items: center; }
        .scena { height: 320px; perspective: 1000px; display: flex; align-items: center; justify-content: center; width: 100%; }
        .dort-telo { position: relative; width: 160px; transform-style: preserve-3d; transition: transform 0.1s linear; }
        .vrstva { position: absolute; width: 100%; height: 10px; transform-style: preserve-3d; bottom: var(--bottom); }
        .segment { position: absolute; width: var(--segW); height: 10px; left: 50%; margin-left: calc(var(--segW)/-2); background: linear-gradient(to right, rgba(0,0,0,0.1), transparent, rgba(0,0,0,0.1)), var(--color); }
        .vicko { position: absolute; width: var(--w); height: var(--w); background: var(--topColor); border-radius: 50%; left: 50%; top: 50%; transform: translate(-50%, -50%) rotateX(90deg) translateZ(5px); transform-style: preserve-3d; }
        
        /* OVOCE NA VRKU */
        .ovoce-kus { position: absolute; font-size: 20px; transform: rotateX(-90deg); filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2)); pointer-events: none; }

        .vyska-info { background: var(--primary); color: white; padding: 8px 20px; border-radius: 50px; font-weight: bold; margin-bottom: 20px; }
        .tahlo { width: 70%; accent-color: var(--primary); cursor: pointer; margin-top: 20px; }
        
        /* DOPL켾KY */
        .doplnky-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 10px; }
        .doplnek-blok { border: 1px solid #eee; border-radius: 15px; padding: 15px; background: #fcfcfc; transition: 0.3s; }
        .doplnek-blok.aktivni { border-color: var(--primary); background: var(--bg); }
        .doplnek-hlavicka { display: flex; align-items: center; gap: 10px; cursor: pointer; font-weight: 600; font-size: 14px; }
        .doplnek-poznamka { margin-top: 10px; display: none; }
        .doplnek-blok.aktivni .doplnek-poznamka { display: block; }
        
        .btn { width: 100%; padding: 20px; background: var(--primary); color: white; border: none; border-radius: 18px; cursor: pointer; font-weight: 800; font-size: 18px; margin-top: 20px; }

        @media (max-width: 950px) { .hlavni-wrapper { flex-direction: column; } .levy-panel { flex: 0 0 auto; width: 100%; } .doplnky-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

<div class="hlavni-wrapper">
    <div class="levy-panel">
        <img src="logo.jpg" alt="Logo" class="logo-vlevo">
        <p style="margin-top:30px; text-align:center; opacity:0.8; font-style: italic;">"Upe캜eme v치m vzpom칤nku..."</p>
    </div>

    <div class="obsah">
        <h1>Konfigur치tor dortu</h1>
        <div class="sekce">
            <h3>游꾹 Design dortu</h3>
            <div class="flex">
                <div>
                    <label>Vrstvy</label>
                    <select id="patra" onchange="kresliDort()">
                        <option value="2">2 vrstvy</option>
                        <option value="3">3 vrstvy</option>
                        <option value="4" selected>4 vrstvy</option>
                        <option value="5">5 vrstev</option>
                    </select>
                </div>
                <div>
                    <label>Korpus</label>
                    <select id="korpus" onchange="kresliDort()">
                        <option value="#f3e5ab" selected>Sv캩tl칳 pi코kot</option>
                        <option value="#4e342e">캛okol치dov칳</option>
                        <option value="#d32f2f">Red Velvet</option>
                    </select>
                </div>
                <div>
                    <label>Zdoben칤 navrch</label>
                    <select id="ovoce-typ" onchange="kresliDort()">
                        <option value="">Bez ovoce</option>
                        <option value="游꼡">Jahody</option>
                        <option value="游삃">Bor콢vky</option>
                        <option value="游볳">Kiwi</option>
                        <option value="mix">Mix ovoce</option>
                    </select>
                </div>
            </div>
            <label>Vn캩j코칤 pot콏en칤</label>
            <select id="vnejsi-barva" onchange="kresliDort()">
                <option value="naked" selected>Naked (lehce pot콏en칳)</option>
                <option value="#ffffff">B칤l칳 hladk칳</option>
                <option value="#fce7f3">R콢쬺v칳 hladk칳</option>
            </select>
        </div>

        <div class="scena-wrapper">
            <div class="vyska-info">V칳코ka cca <span id="cm-vyska">0</span> cm</div>
            <div class="scena"><div class="dort-telo" id="vizual"></div></div>
            <input type="range" min="0" max="360" value="45" class="tahlo" oninput="otoc(this.value)">
        </div>

        <div class="sekce">
            <h3>游꾸 Dopl켿ky</h3>
            <div class="doplnky-grid">
                <div class="doplnek-blok" id="blok-papir">
                    <label class="doplnek-hlavicka"><input type="checkbox" id="check-papir" onchange="updateBlok('papir')"> Jedl칳 pap칤r</label>
                    <div class="doplnek-poznamka"><textarea id="note-papir" rows="1" placeholder="Motiv..."></textarea></div>
                </div>
                <div class="doplnek-blok" id="blok-figurka">
                    <label class="doplnek-hlavicka"><input type="checkbox" id="check-figurka" onchange="updateBlok('figurka')"> Figurka</label>
                    <div class="doplnek-poznamka"><textarea id="note-figurka" rows="1" placeholder="Popis..."></textarea></div>
                </div>
                <div class="doplnek-blok" id="blok-zapich">
                    <label class="doplnek-hlavicka"><input type="checkbox" id="check-zapich" onchange="updateBlok('zapich')"> Z치pich</label>
                    <div class="doplnek-poznamka"><textarea id="note-zapich" rows="1" placeholder="Text..."></textarea></div>
                </div>
            </div>
        </div>

        <button class="btn" onclick="odeslat()">ODESLAT POPT츼VKU</button>
    </div>
</div>

<script>
    let rotY = 45;

    function updateBlok(id) {
        const blok = document.getElementById('blok-' + id);
        const check = document.getElementById('check-' + id);
        if(check.checked) blok.classList.add('aktivni');
        else blok.classList.remove('aktivni');
    }

    function otoc(v) {
        rotY = v;
        document.getElementById('vizual').style.transform = `rotateX(-20deg) rotateY(${v}deg)`;
    }

    function kresliDort() {
        const plocha = document.getElementById('vizual');
        const pCount = parseInt(document.getElementById('patra').value);
        const cK = document.getElementById('korpus').value;
        const oTyp = document.getElementById('ovoce-typ').value;
        const vnejsi = document.getElementById('vnejsi-barva').value;
        
        plocha.innerHTML = "";
        const sirka = 160;
        const pocetVrstev = pCount * 2; 
        document.getElementById('cm-vyska').innerText = (pocetVrstev * 1.5).toFixed(1);

        for (let i = 0; i < pocetVrstev; i++) {
            const v = document.createElement('div');
            v.className = 'vrstva';
            v.style.setProperty('--bottom', (i * 10) + 'px');
            const barva = (vnejsi === "naked") ? (i % 2 === 0 ? cK : "#ffffff") : vnejsi;
            v.style.setProperty('--color', barva);
            v.style.setProperty('--segW', (Math.PI * sirka / 32 + 2) + 'px');

            for (let j = 0; j < 32; j++) {
                const s = document.createElement('div');
                s.className = 'segment';
                s.style.transform = `rotateY(${j * 11.25}deg) translateZ(${sirka/2}px)`;
                v.appendChild(s);
            }

            if (i === pocetVrstev - 1) {
                const vicko = document.createElement('div');
                vicko.className = 'vicko';
                vicko.style.setProperty('--w', sirka + 'px');
                vicko.style.setProperty('--topColor', (vnejsi === "naked") ? "#ffffff" : vnejsi);
                
                // P콎ID츼N칈 OVOCE NA VREK
                if (oTyp !== "") {
                    const druhy = ["游꼡", "游삃", "游볳"];
                    for (let k = 0; k < 8; k++) {
                        const span = document.createElement('span');
                        span.className = 'ovoce-kus';
                        span.innerText = (oTyp === "mix") ? druhy[k % 3] : oTyp;
                        
                        const angle = (k / 8) * Math.PI * 2;
                        const radius = 50;
                        const x = Math.cos(angle) * radius + 80 - 10;
                        const y = Math.sin(angle) * radius + 80 - 10;
                        
                        span.style.left = x + "px";
                        span.style.top = y + "px";
                        vicko.appendChild(span);
                    }
                }
                v.appendChild(vicko);
            }
            plocha.appendChild(v);
        }
        otoc(rotY);
    }

    function odeslat() { alert("Popt치vka p콏ipravena!"); }
    window.onload = kresliDort;
</script>

</body>
</html>
