<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <style>
        :root { --primary: #ad1457; }
        body { background: #f0f2f5; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .karta { background: white; padding: 30px; border-radius: 30px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.1); width: 350px; }
        
        .scena { height: 300px; perspective: 1000px; display: flex; align-items: center; justify-content: center; }
        .dort-telo { position: relative; width: 180px; transform-style: preserve-3d; transform: rotateX(-20deg) rotateY(45deg); }

        /* Vrstvy a vicko */
        .vrstva { position: absolute; width: 100%; height: 40px; transform-style: preserve-3d; bottom: var(--bottom); }
        .segment { position: absolute; width: var(--segW); height: 40px; background: var(--color); left: 50%; margin-left: calc(var(--segW)/-2); background: linear-gradient(to right, rgba(0,0,0,0.1), transparent, rgba(0,0,0,0.1)), var(--color); }
        .vicko { position: absolute; width: var(--w); height: var(--w); background: var(--topColor); border-radius: 50%; left: 50%; top: 50%; transform: translate(-50%, -50%) rotateX(90deg) translateZ(20px); transform-style: preserve-3d; }

        /* JAHODY */
        .strawberry { position: absolute; width: 30px; height: 40px; left: 50%; top: 50%; margin-left: -15px; margin-top: -20px; transform-style: preserve-3d; }
        .strawberry svg { width: 100%; height: 100%; filter: drop-shadow(0 5px 5px rgba(0,0,0,0.2)); }

        .tahlo { width: 100%; margin: 20px 0; accent-color: var(--primary); }
    </style>
</head>
<body>

<div class="karta">
    <h2 style="color:var(--primary)">Cakes by DT</h2>
    <div class="scena"><div class="dort-telo" id="vizual"></div></div>
    <input type="range" min="0" max="360" value="45" class="tahlo" oninput="otoc(this.value)">
    <p style="font-size: 12px; color: #888;">OTÁČEJTE SLIDEREM</p>
</div>

<script>
    let rotY = 45;
    const svgJahoda = `<svg viewBox="0 0 100 120"><path d="M50,110 C20,110 5,80 5,50 C5,20 25,5 50,5 C75,5 95,20 95,50 C95,80 80,110 50,110 Z" fill="#ff4d4d"/><path d="M50,10 L35,-5 L50,2 L65,-5 Z" fill="#2e7d32"/></svg>`;

    function otoc(v) {
        rotY = v;
        document.getElementById('vizual').style.transform = `rotateX(-20deg) rotateY(${v}deg)`;
        // Jahody rotujeme proti pohybu dortu, aby se neustále dívaly na nás (Billboard)
        document.querySelectorAll('.strawberry').forEach(j => {
            const x = j.dataset.x;
            const y = j.dataset.y;
            j.style.transform = `translate(${x}px, ${y}px) rotateZ(${-v}deg) rotateX(-90deg)`;
        });
    }

    function kresli() {
        const plocha = document.getElementById('vizual');
        const sirka = 180;
        const barvy = ['#5d4037', '#f8bbd0']; // Korpus, Krém
        
        plocha.innerHTML = "";
        for (let i = 0; i < 4; i++) {
            const v = document.createElement('div');
            v.className = 'vrstva';
            v.style.setProperty('--bottom', (i * 40) + 'px');
            v.style.setProperty('--color', barvy[i % 2]);
            v.style.setProperty('--segW', (Math.PI * sirka / 24 + 1) + 'px');

            for (let j = 0; j < 24; j++) {
                const s = document.createElement('div');
                s.className = 'segment';
                s.style.transform = `rotateY(${j * 15}deg) translateZ(${sirka/2}px)`;
                v.appendChild(s);
            }

            if (i === 3) { // Horní vrstva
                const vicko = document.createElement('div');
                vicko.className = 'vicko';
                vicko.style.setProperty('--w', sirka + 'px');
                vicko.style.setProperty('--topColor', '#f8bbd0');
                
                // --- POZICE JAHOD ---
                const r = sirka / 3.5;
                [[0,0], [r,0], [-r,0], [0,r], [0,-r]].forEach(p => {
                    const j = document.createElement('div');
                    j.className = 'strawberry';
                    j.dataset.x = p[0];
                    j.dataset.y = p[1];
                    j.innerHTML = svgJahoda;
                    vicko.appendChild(j);
                });
                v.appendChild(vicko);
            }
            plocha.appendChild(v);
        }
        otoc(45);
    }
    kresli();
</script>
</body>
</html>
