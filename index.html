<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>3D Konfigurátor | Cakes by DT</title>
    <style>
        :root { --primary: #ad1457; --bg: #fff5f8; --accent: #f9a8d4; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); display: flex; justify-content: center; margin: 0; min-height: 100vh; }
        
        .hlavni-wrapper { display: flex; width: 100%; max-width: 1200px; background: white; margin: 40px; border-radius: 30px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.1); }
        .levy-panel { flex: 0 0 300px; background: linear-gradient(135deg, var(--primary), #880e4f); color: white; padding: 40px; display: flex; flex-direction: column; align-items: center; }
        .obsah { flex: 1; padding: 40px; }

        /* 3D SCÉNA */
        .scena-wrapper { background: #fdfdfd; border: 2px dashed var(--accent); border-radius: 20px; padding: 40px; display: flex; flex-direction: column; align-items: center; margin: 20px 0; }
        .scena { height: 350px; perspective: 1000px; display: flex; align-items: center; justify-content: center; width: 100%; }
        .dort-telo { position: relative; width: 160px; transform-style: preserve-3d; transition: transform 0.1s linear; }
        
        /* VRSTVY DORTU */
        .vrstva { position: absolute; width: 100%; height: 10px; transform-style: preserve-3d; bottom: var(--bottom); }
        .segment { position: absolute; width: 18px; height: 10px; left: 50%; margin-left: -9px; background: linear-gradient(to right, rgba(0,0,0,0.1), transparent, rgba(0,0,0,0.1)), var(--color); border-radius: 2px; }
        .vicko { position: absolute; width: 160px; height: 160px; background: var(--topColor); border-radius: 50%; left: 50%; top: 50%; transform: translate(-50%, -50%) rotateX(90deg) translateZ(5px); transform-style: preserve-3d; }

        /* 3D OVOCE */
        .objemne-ovoce { position: absolute; transform-style: preserve-3d; }
        
        /* Borůvka (3D kulička ze 3 ploch) */
        .boruvka { width: 12px; height: 12px; background: #3f51b5; border-radius: 50%; position: absolute; }
        .boruvka::before { content: ''; position: absolute; width: 100%; height: 100%; background: #303f9f; border-radius: 50%; transform: rotateY(90deg); }
        .boruvka::after { content: ''; position: absolute; width: 100%; height: 100%; background: #1a237e; border-radius: 50%; transform: rotateX(90deg); }

        /* Jahoda (3D jehlanovitý tvar) */
        .jahoda { width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 18px solid #e91e63; position: absolute; }
        .jahoda::after { content: ''; position: absolute; left: -8px; border-left: 8px solid transparent; border-right: 8px solid transparent; border-bottom: 18px solid #c2185b; transform: rotateY(90deg); }

        /* Kiwi (3D disk) */
        .kiwi { width: 18px; height: 18px; background: #8bc34a; border: 2px solid #689f38; border-radius: 50%; position: absolute; transform-style: preserve-3d; }
        .kiwi::after { content: '..'; color: #33691e; font-weight: bold; position: absolute; top: -2px; left: 4px; }

        .doplnky-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .doplnek-blok { border: 1px solid #eee; padding: 15px; border-radius: 15px; background: #fafafa; font-size: 14px; font-weight: bold; cursor: pointer; }
        .doplnek-blok.aktivni { border-color: var(--primary); background: var(--bg); }
        
        .tahlo { width: 80%; accent-color: var(--primary); margin-top: 20px; }
        select { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="hlavni-wrapper">
    <div class="levy-panel">
        <h2 style="text-align:center">Cakes by DT</h2>
        <p style="font-size: 14px; opacity: 0.8; text-align: center">Váš 3D konfigurátor</p>
    </div>

    <div class="obsah">
        <h1>Konfigurátor dortu</h1>
        
        <div style="display: flex; gap: 20px;">
            <div style="flex: 1">
                <label>Počet vrstev</label>
                <select id="patra" onchange="kresliDort()">
                    <option value="3">3 vrstvy</option>
                    <option value="4" selected>4 vrstvy</option>
                    <option value="5">5 vrstev</option>
                </select>
            </div>
            <div style="flex: 1">
                <label>Korpus</label>
                <select id="korpus" onchange="kresliDort()">
                    <option value="#f3e5ab">Světlý</option>
                    <option value="#4e342e" selected>Čokoládový</option>
                </select>
            </div>
            <div style="flex: 1">
                <label>3D Ovoce navrch</label>
                <select id="ovoce" onchange="kresliDort()">
                    <option value="none">Žádné</option>
                    <option value="jahoda">3D Jahody</option>
                    <option value="boruvka">3D Borůvky</option>
                    <option value="kiwi">3D Kiwi</option>
                    <option value="mix">3D Mix</option>
                </select>
            </div>
        </div>

        <div class="scena-wrapper">
            <div class="scena"><div class="dort-telo" id="vizual"></div></div>
            <input type="range" min="0" max="360" value="45" class="tahlo" oninput="otoc(this.value)">
            <p style="font-size: 12px; color: #888">Otáčejte posuvníkem pro 3D pohled</p>
        </div>

        <h3>Doplňky</h3>
        <div class="doplnky-grid">
            <div class="doplnek-blok" id="b1" onclick="this.classList.toggle('aktivni')">Jedlý papír</div>
            <div class="doplnek-blok" id="b2" onclick="this.classList.toggle('aktivni')">Figurka</div>
            <div class="doplnek-blok" id="b3" onclick="this.classList.toggle('aktivni')">Zápich</div>
        </div>
    </div>
</div>

<script>
    let rotY = 45;

    function otoc(v) {
        rotY = v;
        document.getElementById('vizual').style.transform = `rotateX(-25deg) rotateY(${v}deg)`;
    }

    function kresliDort() {
        const plocha = document.getElementById('vizual');
        const pCount = parseInt(document.getElementById('patra').value) * 2;
        const cK = document.getElementById('korpus').value;
        const oTyp = document.getElementById('ovoce').value;
        
        plocha.innerHTML = "";
        
        // Vykreslení těla dortu
        for (let i = 0; i < pCount; i++) {
            const v = document.createElement('div');
            v.className = 'vrstva';
            v.style.setProperty('--bottom', (i * 10) + 'px');
            v.style.setProperty('--color', (i % 2 === 0 ? cK : "#ffffff"));

            for (let j = 0; j < 32; j++) {
                const s = document.createElement('div');
                s.className = 'segment';
                s.style.transform = `rotateY(${j * 11.25}deg) translateZ(80px)`;
                v.appendChild(s);
            }

            if (i === pCount - 1) {
                const vicko = document.createElement('div');
                vicko.className = 'vicko';
                vicko.style.setProperty('--topColor', "#ffffff");
                
                // PŘIDÁNÍ 3D OVOCE
                if (oTyp !== "none") {
                    for (let k = 0; k < 8; k++) {
                        const oKontejner = document.createElement('div');
                        oKontejner.className = 'objemne-ovoce';
                        
                        // Pozice do kruhu
                        const angle = (k / 8) * Math.PI * 2;
                        const x = Math.cos(angle) * 55 + 80;
                        const y = Math.sin(angle) * 55 + 80;
                        oKontejner.style.left = x + "px";
                        oKontejner.style.top = y + "px";

                        // Výběr 3D prvku
                        let finalTyp = oTyp;
                        if(oTyp === "mix") {
                            const tvary = ["jahoda", "boruvka", "kiwi"];
                            finalTyp = tvary[k % 3];
                        }

                        const doplnek = document.createElement('div');
                        doplnek.className = finalTyp;
                        
                        // Vyrovnání otočení, aby ovoce "stálo" na dortu
                        doplnek.style.transform = "rotateX(-90deg) translateZ(5px)";
                        
                        oKontejner.appendChild(doplnek);
                        vicko.appendChild(oKontejner);
                    }
                }
                v.appendChild(vicko);
            }
            plocha.appendChild(v);
        }
        otoc(rotY);
    }

    window.onload = kresliDort;
</script>

</body>
</html>
