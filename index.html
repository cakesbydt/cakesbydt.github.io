<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Konfigur√°tor | Cakes by DT</title>
    <style>
        :root { --primary: #ad1457; --bg: #fff5f8; --border: #fce7f3; }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background-color: var(--bg); 
            display: flex; 
            justify-content: center; 
            align-items: stretch; /* Aby oba sloupce mohly b√Ωt stejnƒõ vysok√© */
            padding: 0; 
            margin: 0; 
            min-height: 100vh;
        }

        /* HLAVN√ç KONTEJNER */
        .hlavni-wrapper {
            display: flex;
            width: 100%;
            max-width: 1000px;
            background: white;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
        }

        /* LEV√ù PANEL - LOGO P√ÅS ODSHORA DOL≈Æ */
        .levy-panel {
            flex: 0 0 250px; 
            background-color: var(--primary); /* Barva p√°su */
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 0;
        }

        .logo-vlevo {
            width: 180px;
            height: auto;
            border-radius: 15px; /* Lehk√© zaoblen√≠ loga */
            border: 3px solid rgba(255,255,255,0.2);
        }

        /* PRAV√Å STRANA S FORMUL√Å≈òEM */
        .obsah { 
            flex: 1;
            padding: 40px;
            background: white;
        }

        .header { text-align: left; margin-bottom: 30px; border-bottom: 2px solid var(--bg); padding-bottom: 10px; }
        h1 { color: var(--primary); margin: 0; font-size: 32px; }

        /* 3D SC√âNA */
        .scena-wrapper { background: #fffcfd; border: 2px dashed #f9a8d4; border-radius: 20px; margin: 20px 0; padding: 30px 10px; display: flex; flex-direction: column; align-items: center; position: relative; }
        .scena { height: 280px; perspective: 1000px; display: flex; align-items: center; justify-content: center; width: 100%; }
        .dort-telo { position: relative; width: 160px; transform-style: preserve-3d; transition: transform 0.1s linear; }
        .vyska-info { background: var(--primary); color: white; padding: 6px 15px; border-radius: 20px; font-weight: bold; font-size: 13px; margin-bottom: 10px; z-index: 10; }

        /* 3D VRSTVY */
        .vrstva { position: absolute; width: 100%; height: 10px; transform-style: preserve-3d; bottom: var(--bottom); }
        .segment { position: absolute; width: var(--segW); height: 10px; left: 50%; margin-left: calc(var(--segW)/-2); background: linear-gradient(to right, rgba(0,0,0,0.1), transparent, rgba(0,0,0,0.1)), var(--color); }
        .vicko { position: absolute; width: var(--w); height: var(--w); background: var(--topColor); border-radius: 50%; left: 50%; top: 50%; transform: translate(-50%, -50%) rotateX(90deg) translateZ(5px); transform-style: preserve-3d; }
        
        /* FORMUL√Å≈ò */
        .sekce { background: #fffcfd; padding: 15px; border-radius: 15px; border: 1px solid var(--border); margin-bottom: 15px; }
        h3 { color: var(--primary); font-size: 15px; margin: 0 0 10px; border-bottom: 1px solid #f9a8d4; padding-bottom: 5px; text-transform: uppercase; }
        .flex { display: flex; gap: 10px; margin-bottom: 10px; }
        .flex > div { flex: 1; }
        label { display: block; font-size: 11px; font-weight: bold; color: var(--primary); margin-bottom: 4px; }
        input, select, textarea { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #f9a8d4; box-sizing: border-box; font-family: inherit; }
        
        .doplnek-blok { border: 1px solid #fce7f3; border-radius: 12px; padding: 10px; margin-bottom: 10px; background: white; transition: 0.2s; }
        .doplnek-blok.aktivni { border-color: var(--primary); background: #fff5f8; }
        .doplnek-hlavicka { display: flex; align-items: center; gap: 10px; cursor: pointer; font-weight: bold; color: var(--primary); }
        .doplnek-hlavicka input { width: 18px; height: 18px; cursor: pointer; }
        .doplnek-poznamka { margin-top: 8px; display: none; }
        .doplnek-blok.aktivni .doplnek-poznamka { display: block; }

        .btn { width: 100%; padding: 18px; background: var(--primary); color: white; border: none; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 18px; margin-top: 20px; transition: 0.3s; }
        .btn:hover { background: #880e4f; transform: scale(1.02); }
        .tahlo { width: 80%; accent-color: var(--primary); cursor: pointer; margin-top: 10px; }

        @media (max-width: 850px) {
            .hlavni-wrapper { flex-direction: column; }
            .levy-panel { flex: 0 0 auto; width: 100%; padding: 20px 0; }
            .logo-vlevo { width: 120px; }
        }
    </style>
</head>
<body>

<div class="hlavni-wrapper">
    <div class="levy-panel">
        <img src="logo.jpg" alt="Logo Cakes by DT" class="logo-vlevo">
    </div>

    <div class="obsah">
        <div class="header">
            <h1>Cakes by DT</h1>
            <p style="color: #ad1457; margin: 5px 0 0 0;">Konfigur√°tor va≈°eho vysnƒõn√©ho dortu</p>
        </div>

        <div class="sekce">
            <h3>üë§ Kontakt</h3>
            <div class="flex">
                <input type="text" id="jmeno" placeholder="Jm√©no a p≈ô√≠jmen√≠">
                <input type="tel" id="telefon" placeholder="Telefonn√≠ ƒç√≠slo">
            </div>
            <input type="email" id="email" placeholder="E-mailov√° adresa">
        </div>

        <div class="sekce">
            <h3>üéÇ Slo≈æen√≠ dortu</h3>
            <div class="flex">
                <div>
                    <label>Vrstvy korpusu</label>
                    <select id="patra" onchange="kresliDort()">
                        <option value="2">2 vrstvy</option>
                        <option value="3">3 vrstvy</option>
                        <option value="4" selected>4 vrstvy</option>
                        <option value="5">5 vrstev</option>
                    </select>
                </div>
                <div>
                    <label>Korpus</label>
                    <select id="korpus" onchange="kresliDort()">
                        <option value="#4e342e">ƒåokol√°dov√Ω</option>
                        <option value="#f3e5ab" selected>Svƒõtl√Ω pi≈°kot</option>
                    </select>
                </div>
            </div>
            <div class="flex">
                <div>
                    <label>Kr√©m</label>
                    <select id="krem" onchange="kresliDort()">
                        <option value="#ffffff">Mascarpone</option>
                        <option value="#fffde7">Vanilka</option>
                        <option value="#f8bbd0">Ovocn√Ω</option>
                    </select>
                </div>
                <div>
                    <label>Ovoce v kr√©mu</label>
                    <select id="ov-vnitrek">
                        <option value="Bez ovoce">Bez ovoce</option>
                        <option value="Jahody">Jahody</option>
                        <option value="Bor≈Øvky">Bor≈Øvky</option>
                        <option value="Maliny">Maliny</option>
                        <option value="Mix">Mix</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="sekce" style="border: 1.5px solid var(--primary);">
            <h3>üé® Vnƒõj≈°√≠ design</h3>
            <div class="flex">
                <div style="flex: 2;">
                    <label>Barva pot≈ôen√≠ (venkovn√≠ kr√©m)</label>
                    <select id="vnejsi-barva" onchange="kresliDort()">
                        <option value="naked" selected>Nahat√Ω (viditeln√© vrstvy)</option>
                        <option value="#ffffff">B√≠l√°</option>
                        <option value="#fce7f3">R≈Ø≈æov√°</option>
                        <option value="#4e342e">ƒåokol√°dov√°</option>
                    </select>
                </div>
                <div>
                    <label>Ovoce na vr≈°ek</label>
                    <select id="ov-vrsek" onchange="kresliDort()">
                        <option value="jahoda">Jahody</option>
                        <option value="boruvka">Bor≈Øvky</option>
                        <option value="none">Bez ovoce</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="scena-wrapper">
            <div class="vyska-info">Celkov√° v√Ω≈°ka: <span id="cm-vyska">0</span> cm</div>
            <div class="scena"><div class="dort-telo" id="vizual"></div></div>
            <input type="range" min="0" max="360" value="45" class="tahlo" oninput="otoc(this.value)">
        </div>

        <div class="sekce">
            <h3>üéÅ Dopl≈àky (za≈°krtnƒõte a up≈ôesnƒõte)</h3>
            
            <div class="doplnek-blok" id="blok-papir">
                <label class="doplnek-hlavicka">
                    <input type="checkbox" id="check-papir" onchange="updateBlok('papir')"> Jedl√Ω pap√≠r
                </label>
                <div class="doplnek-poznamka">
                    <textarea id="note-papir" rows="2" placeholder="Up≈ôesnƒõte motiv na pap√≠r..."></textarea>
                </div>
            </div>

            <div class="doplnek-blok" id="blok-figurka">
                <label class="doplnek-hlavicka">
                    <input type="checkbox" id="check-figurka" onchange="updateBlok('figurka')"> Figurka
                </label>
                <div class="doplnek-poznamka">
                    <textarea id="note-figurka" rows="2" placeholder="Jakou figurku si p≈ôejete?"></textarea>
                </div>
            </div>

            <div class="doplnek-blok" id="blok-zapich">
                <label class="doplnek-hlavicka">
                    <input type="checkbox" id="check-zapich" onchange="updateBlok('zapich')"> Z√°pich (ƒç√≠slo, text)
                </label>
                <div class="doplnek-poznamka">
                    <textarea id="note-zapich" rows="2" placeholder="Text nebo ƒç√≠slo na z√°pich..."></textarea>
                </div>
            </div>

            <div style="margin-top:15px">
                <label>Ostatn√≠ pozn√°mky k objedn√°vce</label>
                <textarea id="poznamka-hlavni" rows="2" placeholder="Barvy zdoben√≠, datum vyzvednut√≠..."></textarea>
            </div>
        </div>

        <button class="btn" onclick="odeslat()">ODESLAT POPT√ÅVKU</button>
    </div>
</div>

<script>
    let rotY = 45;

    function updateBlok(id) {
        const blok = document.getElementById('blok-' + id);
        const check = document.getElementById('check-' + id);
        if(check.checked) blok.classList.add('aktivni');
        else blok.classList.remove('aktivni');
    }

    function otoc(v) {
        rotY = v;
        document.getElementById('vizual').style.transform = `rotateX(-20deg) rotateY(${v}deg)`;
    }

    function kresliDort() {
        const plocha = document.getElementById('vizual');
        const pCount = parseInt(document.getElementById('patra').value);
        const cK = document.getElementById('korpus').value;
        const cN = document.getElementById('krem').value;
        const vnejsi = document.getElementById('vnejsi-barva').value;
        
        plocha.innerHTML = "";
        const sirka = 160;
        const pocetVrstev = pCount * 2; 
        document.getElementById('cm-vyska').innerText = (pocetVrstev * 1.5).toFixed(1);

        for (let i = 0; i < pocetVrstev; i++) {
            const v = document.createElement('div');
            v.className = 'vrstva';
            v.style.setProperty('--bottom', (i * 10) + 'px');
            const barva = (vnejsi === "naked") ? (i % 2 === 0 ? cK : cN) : vnejsi;
            v.style.setProperty('--color', barva);
            v.style.setProperty('--segW', (Math.PI * sirka / 32 + 2) + 'px');

            for (let j = 0; j < 32; j++) {
                const s = document.createElement('div');
                s.className = 'segment';
                s.style.transform = `rotateY(${j * 11.25}deg) translateZ(${sirka/2}px)`;
                v.appendChild(s);
            }

            if (i === pocetVrstev - 1) {
                const vicko = document.createElement('div');
                vicko.className = 'vicko';
                vicko.style.setProperty('--w', sirka + 'px');
                vicko.style.setProperty('--topColor', (vnejsi === "naked") ? cN : vnejsi);
                v.appendChild(vicko);
            }
            plocha.appendChild(v);
        }
        otoc(rotY);
    }

    function odeslat() {
        const jmeno = document.getElementById('jmeno').value;
        if(!jmeno) { alert("Pros√≠m vypl≈àte jm√©no."); return; }

        let doplnekBody = "";
        if(document.getElementById('check-papir').checked) doplnekBody += `%0A- JEDL√ù PAP√çR: ${document.getElementById('note-papir').value}`;
        if(document.getElementById('check-figurka').checked) doplnekBody += `%0A- FIGURKA: ${document.getElementById('note-figurka').value}`;
        if(document.getElementById('check-zapich').checked) doplnekBody += `%0A- Z√ÅPICH: ${document.getElementById('note-zapich').value}`;

        const body = `Popt√°vka od: ${jmeno}%0AEmail: ${document.getElementById('email').value}%0ATel: ${document.getElementById('telefon').value}%0A%0A--- DORT ---%0AV√Ω≈°ka: ${document.getElementById('cm-vyska').innerText} cm%0AKorpus: ${document.getElementById('korpus').options[document.getElementById('korpus').selectedIndex].text}%0AKr√©m: ${document.getElementById('krem').options[document.getElementById('krem').selectedIndex].text}%0AOvoce v kr√©mu: ${document.getElementById('ov-vnitrek').value}%0AVnƒõj≈°√≠ design: ${document.getElementById('vnejsi-barva').options[document.getElementById('vnejsi-barva').selectedIndex].text}%0A%0A--- DOPL≈áKY ---${doplnekBody}%0A%0APozn√°mka k objedn√°vce:%0A${document.getElementById('poznamka-hlavni').value}`;
        
        window.location.href = `mailto:domii.trnovska@seznam.cz?subject=Popt√°vka_Dortu&body=${body}`;
    }

    window.onload = kresliDort;
</script>

</body>
</html>
